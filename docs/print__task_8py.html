<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ME405 Library: src/print_task.py File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="ME405-logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ME405 Library
   &#160;<span id="projectnumber">Version 0.38</span>
   </div>
   <div id="projectbrief">Python library in support of ME405 class</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('print__task_8py.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">print_task.py File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This file contains code for a task which prints things from a queue.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a2986427f884f4edfc5d212b2f99f1f23"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="print__task_8py.html#a2986427f884f4edfc5d212b2f99f1f23">print_task.put</a> (a_string)</td></tr>
<tr class="memdesc:a2986427f884f4edfc5d212b2f99f1f23"><td class="mdescLeft">&#160;</td><td class="mdescRight">Put a string into the print queue so it can be printed by the printing task whenever that task gets a chance.  <a href="print__task_8py.html#a2986427f884f4edfc5d212b2f99f1f23">More...</a><br /></td></tr>
<tr class="separator:a2986427f884f4edfc5d212b2f99f1f23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6172f74f0655d6d9288284aab62dd7fe"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="print__task_8py.html#a6172f74f0655d6d9288284aab62dd7fe">print_task.put_bytes</a> (b_arr)</td></tr>
<tr class="memdesc:a6172f74f0655d6d9288284aab62dd7fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Put bytes from a <code>bytearray</code> or <code>bytes</code> into the print queue.  <a href="print__task_8py.html#a6172f74f0655d6d9288284aab62dd7fe">More...</a><br /></td></tr>
<tr class="separator:a6172f74f0655d6d9288284aab62dd7fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad34c02219d799b143cf0507f093378db"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="print__task_8py.html#ad34c02219d799b143cf0507f093378db">print_task.print_task_function</a> ()</td></tr>
<tr class="memdesc:ad34c02219d799b143cf0507f093378db"><td class="mdescLeft">&#160;</td><td class="mdescRight">Task function for the task which prints stuff.  <a href="print__task_8py.html#ad34c02219d799b143cf0507f093378db">More...</a><br /></td></tr>
<tr class="separator:ad34c02219d799b143cf0507f093378db"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a6a51e5229c91b040a0acaadea1f55025"><td class="memItemLeft" align="right" valign="top"><a id="a6a51e5229c91b040a0acaadea1f55025"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="print__task_8py.html#a6a51e5229c91b040a0acaadea1f55025">print_task.PT_BUF_SIZE</a> = const (1000)</td></tr>
<tr class="memdesc:a6a51e5229c91b040a0acaadea1f55025"><td class="mdescLeft">&#160;</td><td class="mdescRight">The size of the buffer which will hold characters to be printed when the print task has time to print them. <br /></td></tr>
<tr class="separator:a6a51e5229c91b040a0acaadea1f55025"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81414bedb3face3c011fdde4579a04f7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="print__task_8py.html#a81414bedb3face3c011fdde4579a04f7">print_task.print_queue</a></td></tr>
<tr class="memdesc:a81414bedb3face3c011fdde4579a04f7"><td class="mdescLeft">&#160;</td><td class="mdescRight">This queue holds characters to be printed when the print task gets around to it.  <a href="print__task_8py.html#a81414bedb3face3c011fdde4579a04f7">More...</a><br /></td></tr>
<tr class="separator:a81414bedb3face3c011fdde4579a04f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This file contains code for a task which prints things from a queue. </p>
<p>It helps to reduce latency in a system having tasks which print because it sends things to be printed out the serial port one character at a time, even when other tasks put whole strings into the queue at once. When run as a low-priority task, this allows higher priority tasks to interrupt the printing between characters, even when all the tasks are being cooperatively scheduled with a priority-based scheduler.</p>
<p>Example code: </p><div class="fragment"><div class="line"><span class="comment"># In each module which needs to print something:</span></div>
<div class="line"><span class="keyword">import</span> print_task</div>
<div class="line"> </div>
<div class="line"><span class="comment"># In the main module or wherever tasks are created:</span></div>
<div class="line">print_task = <a class="code" href="classcotask_1_1Task.html">cotask.Task</a> (print_task_function, name = <span class="stringliteral">&#39;Printing&#39;</span>, </div>
<div class="line">                         priority = 0, profile = <span class="keyword">True</span>)</div>
<div class="line">cotask.task_list.append (print_task)</div>
<div class="line"> </div>
<div class="line"><span class="comment"># In a task which needs to print something:</span></div>
<div class="line">print_queue.put (<span class="stringliteral">&quot;This is a string&quot;</span>)</div>
<div class="line">print_queue.put_bytes (bytearray (<span class="stringliteral">&quot;A bytearray&quot;</span>))</div>
<div class="line">print_queue.put (<span class="stringliteral">&quot;A number: {:d}\r\n&quot;</span>.format (number))</div>
<div class="ttc" id="aclasscotask_1_1Task_html"><div class="ttname"><a href="classcotask_1_1Task.html">cotask.Task</a></div><div class="ttdoc">Implements multitasking with scheduling and some performance logging.</div><div class="ttdef"><b>Definition:</b> cotask.py:66</div></div>
</div><!-- fragment --><dl class="section copyright"><dt>Copyright</dt><dd>This program is copyright (c) 2018-2023 by JR Ridgely and released under the GNU Public License, version 3.0.</dd></dl>
<p>It is intended for educational use only, but its use is not limited thereto. THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="ad34c02219d799b143cf0507f093378db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad34c02219d799b143cf0507f093378db">&#9670;&nbsp;</a></span>print_task_function()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def print_task.print_task_function </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Task function for the task which prints stuff. </p>
<p>This function checks for any characters to be printed in the queue; if any characters are found then one character is printed, after which the print task yields so other tasks can run. This function must be called periodically; the normal way is to make it the run function of a low priority task in a cooperatively multitasked system so that the task scheduler calls this function when the higher priority tasks don't need to run. </p>

</div>
</div>
<a id="a2986427f884f4edfc5d212b2f99f1f23"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2986427f884f4edfc5d212b2f99f1f23">&#9670;&nbsp;</a></span>put()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def print_task.put </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>a_string</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Put a string into the print queue so it can be printed by the printing task whenever that task gets a chance. </p>
<p>If the print queue is full, characters are lost; this is better than blocking to wait for space in the queue, as we'd block the printing task and space would never open up. When a character has been put into the queue, the <code>go()</code> method of the print task is called so that the run method will be called as soon as the print task is run by the task scheduler. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">a_string</td><td>A string to be put into the queue </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6172f74f0655d6d9288284aab62dd7fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6172f74f0655d6d9288284aab62dd7fe">&#9670;&nbsp;</a></span>put_bytes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def print_task.put_bytes </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>b_arr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Put bytes from a <code>bytearray</code> or <code>bytes</code> into the print queue. </p>
<p>When characters have been put into the queue, the <code>go()</code> method of the print task is called so that the run method will be called as soon as the print task is run by the task scheduler. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">b_arr</td><td>The bytearray whose contents go into the queue </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a81414bedb3face3c011fdde4579a04f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a81414bedb3face3c011fdde4579a04f7">&#9670;&nbsp;</a></span>print_queue</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">print_task.print_queue</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;=  <a class="code" href="classtask__share_1_1Queue.html">task_share.Queue</a> (<span class="stringliteral">&#39;B&#39;</span>, PT_BUF_SIZE, name = <span class="stringliteral">&quot;Print Queue&quot;</span>, </div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;                                thread_protect = <span class="keyword">False</span>, overwrite = <span class="keyword">False</span>)</div>
<div class="ttc" id="aclasstask__share_1_1Queue_html"><div class="ttname"><a href="classtask__share_1_1Queue.html">task_share.Queue</a></div><div class="ttdoc">A queue which is used to transfer data from one task to another.</div><div class="ttdef"><b>Definition:</b> task_share.py:90</div></div>
</div><!-- fragment -->
<p>This queue holds characters to be printed when the print task gets around to it. </p>
<p>It is always created when print_task is imported as a module. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="print__task_8py.html">print_task.py</a></li>
    <li class="footer">Generated on Tue Feb 27 2024 21:50:10 for ME405 Library by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
